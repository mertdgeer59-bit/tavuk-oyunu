<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Chicken Empires</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; padding: 0; height: 100vh; display: flex; flex-direction: column; }
        
        .header { display: flex; justify-content: space-around; padding: 10px; background: #111; border-bottom: 1px solid #222; }
        .stat { text-align: center; font-size: 11px; color: #888; }
        .stat b { display: block; color: #f3ba2f; font-size: 14px; }

        .container { flex: 1; overflow-y: auto; padding: 20px; text-align: center; }
        .page { display: none; }
        .active { display: block; }

        .balance-box { margin: 20px 0; }
        .balance-box h1 { font-size: 40px; margin: 5px 0; }
        .badges { display: flex; justify-content: center; gap: 10px; font-size: 12px; }
        .badge { background: #1c1c1e; padding: 5px 10px; border-radius: 10px; border: 1px solid #333; }

        .bird-img { width: 180px; margin: 20px auto; display: block; cursor: pointer; transition: 0.1s; }
        .bird-img:active { transform: scale(0.9); }

        .card { background: #1c1c1e; border-radius: 12px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; border: 1px solid #333; }
        .card-info { text-align: left; }
        .buy-btn { background: #f3ba2f; color: #000; border: none; padding: 8px 12px; border-radius: 8px; font-weight: bold; }

        .navbar { background: #000; display: flex; border-top: 1px solid #222; padding: 10px 0 25px 0; }
        .nav-item { flex: 1; text-align: center; color: #666; font-size: 10px; cursor: pointer; }
        .nav-item.active { color: #f3ba2f; }
        .nav-item i { font-size: 20px; display: block; margin-bottom: 4px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="stat">TÄ±k GÃ¼cÃ¼ <b id="ui-tap">+1</b></div>
        <div class="stat">KÃ¢r/Saat <b id="ui-pph">0</b></div>
        <div class="stat">Bilet <b id="ui-tickets">0</b></div>
    </div>

    <div class="container">
        <div id="home" class="page active">
            <div class="balance-box">
                <div class="badges">
                    <div class="badge">ðŸŸ¡ AltÄ±n: <b id="ui-gold">0</b></div>
                    <div class="badge">âšª GÃ¼mÃ¼ÅŸ: <b id="ui-silver">1000</b></div>
                </div>
                <h1 id="ui-eggs">0</h1>
                <small style="color:#555">YUMURTA</small>
            </div>
            <img src="https://i.ibb.co/L6M7VnS/eagle.png" class="bird-img" onclick="handleTap()">
            <button onclick="sellEggs()" style="width:100%; padding:15px; background:#f3ba2f; border:none; border-radius:12px; font-weight:bold; margin-top:20px;">YUMURTALARI SAT (100)</button>
        </div>

        <div id="mine" class="page">
            <div class="card">
                <div class="card-info"><b>Normal Tavuk</b><br><small>+42/saat | 1.000 GÃ¼mÃ¼ÅŸ</small></div>
                <button class="buy-btn" onclick="buyChicken(42, 1000)">AL</button>
            </div>
            <div class="card">
                <div class="card-info"><b>Ã‡iftlik TavuÄŸu</b><br><small>+221/saat | 5.000 GÃ¼mÃ¼ÅŸ</small></div>
                <button class="buy-btn" onclick="buyChicken(221, 5000)">AL</button>
            </div>
        </div>
    </div>

    <nav class="navbar">
        <div class="nav-item active" onclick="showPage('home', this)"><i class="fas fa-coins"></i>Borsa</div>
        <div class="nav-item" onclick="showPage('mine', this)"><i class="fas fa-hammer"></i>GeliÅŸtir</div>
        <div class="nav-item"><i class="fas fa-users"></i>ArkadaÅŸlar</div>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready(); // Web App'in hazÄ±r olduÄŸunu bildirir

        let user = {
            eggs: parseFloat(localStorage.getItem('c_e')) || 0,
            gold: parseInt(localStorage.getItem('c_g')) || 0,
            silver: localStorage.getItem('c_s') !== null ? parseInt(localStorage.getItem('c_s')) : 1000,
            pph: parseInt(localStorage.getItem('c_p')) || 0
        };

        function update() {
            document.getElementById('ui-eggs').innerText = Math.floor(user.eggs).toLocaleString();
            document.getElementById('ui-gold').innerText = user.gold.toLocaleString();
            document.getElementById('ui-silver').innerText = user.silver.toLocaleString();
            document.getElementById('ui-pph').innerText = "+" + user.pph.toLocaleString();
            
            localStorage.setItem('c_e', user.eggs);
            localStorage.setItem('c_g', user.gold);
            localStorage.setItem('c_s', user.silver);
            localStorage.setItem('c_p', user.pph);
        }

        function handleTap() {
            user.eggs += 1;
            update();
            tg.HapticFeedback.impactOccurred('light');
        }

        function sellEggs() {
            if (user.eggs >= 100) {
                user.eggs -= 100;
                user.gold += 1;
                user.silver += 1;
                update();
            } else {
                tg.showAlert("Yetersiz yumurta!");
            }
        }

        function buyChicken(p, c) {
            if (user.silver >= c) {
                user.silver -= c;
                user.pph += p;
                update();
            } else {
                tg.showAlert("Yetersiz gÃ¼mÃ¼ÅŸ!");
            }
        }

        function showPage(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }

        setInterval(() => {
            if (user.pph > 0) {
                user.eggs += (user.pph / 3600);
                update();
            }
        }, 1000);

        update();
    </script>
</body>
</html>
